<!-- <ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      {{ activeGame==='math' ? 'Math Game' : 'Color Memory Game' }}
    </ion-title>
  </ion-toolbar>
</ion-header> -->

<ion-content class="ion-padding">

  <!-- Switch Buttons -->
<ion-segment
  [(ngModel)]="activeGame"
  (ngModelChange)="switchGame($event)"
  style=" --height: 60px; /* makes the bar taller */ "
>
  <ion-segment-button
    value="math"
    style="font-size: 1.5rem; font-weight: 500; padding: 0.5rem 0.75rem;"
  >
    Math Game
  </ion-segment-button>

  <ion-segment-button
    value="color"
    style="font-size: 1.5rem; font-weight: 500; padding: 0.5rem .75rem;"
  >
    Color Game
  </ion-segment-button>
</ion-segment>

  <!-- MATH GAME -->
  <ng-container *ngIf="activeGame==='math'">
  <!-- 1) show one number at a time -->
  <div *ngIf="showingNumbers" class="ion-text-center">
    <h1 style="font-size: 2.5rem; font-weight: bold; margin-bottom: 0.5rem;">Remember this number!</h1>
    <div
  style="
    width:150px; 
    height:150px;
    border:3px solid #000;
    border-radius:50%;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    font-size: 4rem;
    margin: 1.5rem 0;
  ">
  {{ numberSequence[currentNumberIndex] }}
</div>

    <br/>
    <ion-button color="primary" style="font-size:2rem; padding:1rem 2rem;" (click)="nextMath()">Next</ion-button>
  </div>

  <!-- 2) show question + keypad -->
  <div *ngIf="!showingNumbers" class="ion-text-center">
    <h1 style="color:green; font-size: 2.5rem; font-weight: bold; margin-bottom: 0.5rem;">{{ question }}</h1>
    <!-- now you get a proper rounded outline around the input -->
<!--ANSWER-BOX-->
<ion-item
  fill="outline"
  shape="round"
  lines="none"
  style="width:280px; margin:1em auto; --border-radius: 30px; --border-width: 3px; --border-color: #000;"
>
  <ion-input
    [value]="answer"
    readonly
    style="font-size:3rem; text-align:center;"
  ></ion-input>
</ion-item>

<ion-button style="font-size: 2rem; margin-top: 1rem;"  color="primary" (click)="submitAnswer()">Submit</ion-button>

    <!-- Keypad -->
<div
  style="
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-top: 2rem;
  ">
  <button
    *ngFor="let k of ['0','1','2','3','4','5','6','7','8','9']"
    (click)="addKey(k)"
    style="
      width: 80px;
      height: 80px;
      font-size: 2rem;
      border-radius: 12px;
      border: 1px solid #ccc;
      background: #f2f2f2;
    ">
    {{ k }}
  </button>
  <button
    (click)="backspace()"
    style="
      width: 80px;
      height: 80px;
      font-size: 2rem;
      border-radius: 12px;
      background: #e74c3c;
      color: white;
      border: none;
    ">
    ⌫
  </button>
</div>
  </div>
</ng-container>

  <!-- COLOR SEQUENCE GAME -->
  <ng-container *ngIf="activeGame==='color'">
    <div *ngIf="showingColors" style="text-align:center; margin-top:1em;">
      <h1 style = "font-size: 2.5rem; font-weight: bold; margin-bottom: 1rem;">Remember this color!</h1>
      <div [style.background]="currentColor"
           style="width:150px; height:150px; border:2.5px solid #000; margin:1.5em auto;">
      </div>
    <ion-button
      color="primary"
      style="font-size:2rem;margin: 1em auto;"
      (click)="nextColor()"
    >
       Next
   </ion-button>

      <!-- <button (click)="nextColor()">Next</button> -->
    </div>

    <div *ngIf="!showingColors" style="margin-top:1.5em;">
          <!-- Selected‐color slots -->

  <div
  class="selection-slots"
  style="display:flex;justify-content:center;gap:1rem;margin-bottom:1.5em; min-height: 90px;"
>
  <div
    *ngFor="let c of selectedAnswers"
    [style.background]="c"
    style="
      width: 90px;
      height:90px;
      border:2px solid #000;
      border-radius:4px;
    "
  ></div>
</div>

      <h3 style="font-size:2.5rem; text-align:center;">Select the colors you saw:</h3>
      <!-- single‐level grid for all 10 colors -->
<div
  style="
    display: grid;
    grid-template-columns: repeat(5, 90px);
    gap: 0.5rem;
    justify-content: center;
    margin-top: 1rem;
  "
>
  <div
    *ngFor="let c of shuffledOptions"
    (click)="selectColor(c)"
    [style.background]="c"
    style="
      width: 90px;
      height: 90px;
      border: 2px solid black;
      border-radius: 4px;
      cursor: pointer;
    "
  ></div>
</div>

  

<div
  style="
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 1em;
    margin-top: 1.5em;
  "
>
  <!-- <ion-button color="danger" (click)="removeLastColor()">DELETE</ion-button>
  <ion-button color="primary" (click)="submitColorSequence()">SUBMIT</ion-button> -->

<div style="display:flex; gap:2rem; justify-content:flex-end; margin-top:1em;">
  <ion-button
    color="danger"
    size="small"
    style="
      --padding-top: 0.3em;
      --padding-bottom: 0.3em;
      --padding-start: 0.8em;
      --padding-end: 0.8em;
      font-size: 1.3rem;
    "
    (click)="removeLastColor()"
  >
    DELETE
  </ion-button>

  <ion-button
    color="primary"
    size="small"
    style="
      --padding-top: 0.3em;
      --padding-bottom: 0.3em;
      --padding-start: 0.8em;
      --padding-end: 0.8em;
      font-size: 1.3rem;
    "
    (click)="submitColorSequence()"
  >
    SUBMIT
  </ion-button>
</div>

</div>

    </div>
  </ng-container>

</ion-content>